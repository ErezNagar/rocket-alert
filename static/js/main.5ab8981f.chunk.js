(this["webpackJsonprocket-alert"]=this["webpackJsonprocket-alert"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(56),i=a.n(n),l=a(13),c=a(14),o=a(17),j=a(16),d=(a(76),a(69)),h=a(122),u=a(124),b=a(121),O=a(123),f=a(114),m=a(120),v=a(127),x=a(128),p=a(23),g=a(1),w=function(e){var t=e.show,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],l=n[1];Object(s.useEffect)((function(){t&&l(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"fadeIn 400ms":"none"},onAnimationEnd:function(){t||l(!1)},children:a})},A=function(e){var t=e.showAverage;return Object(g.jsx)(b.a,{gutter:[8],justify:"center",className:t?"loading-average":"loading-basic",children:Object(g.jsx)(O.a,{children:Object(g.jsx)(f.a,{indicator:Object(g.jsx)(v.a,{style:{fontSize:24,color:"black"},spin:!0})})})})};A.defaultProps={showAverage:!1};var y=function(e){var t=e.isLoading,a=e.title,s=e.alerts;return Object(g.jsxs)("div",{className:"tile-hero",children:[Object(g.jsx)(w,{show:!t,fadeInOnly:!0,children:Object(g.jsx)(m.a,{value:s})}),Object(g.jsx)("h3",{children:a})]})};y.defaultProps={isLoading:!1,title:"",alerts:0};var S=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0,isError:!1,alerts:null},e.getAlerts=function(){e.props.alertsClient.getTotalAlerts(e.props.fromDate,e.props.toDate).then((function(t){if(e.props.isHeroTile)e.setState({alerts:7325,isLoading:!1});else{if(e.props.showAverage){var a=Object(h.a)(new Date(e.props.toDate),new Date(e.props.fromDate));e.setState({average:Math.round(t.payload/a)})}setTimeout((function(){e.setState({alerts:t.payload,isLoading:!1})}),1e3*Math.floor(4*Math.random()))}})).catch((function(t){console.error(t),e.setState({isError:!0})}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAlerts()}},{key:"render",value:function(){var e=!this.state.isLoading&&!this.state.isError;return Object(g.jsx)(g.Fragment,{children:this.props.isHeroTile?Object(g.jsx)(y,{alerts:7325}):Object(g.jsxs)("div",{className:"tile",children:[Object(g.jsx)("h3",{children:this.props.title}),Object(g.jsx)("div",{className:"subtitle",children:this.props.subtitle}),Object(g.jsxs)("div",{children:[this.state.isLoading&&Object(g.jsx)(A,Object(d.a)({},this.props)),e&&this.props.showAverage&&Object(g.jsxs)(b.a,{gutter:[8],justify:"center",className:"average-container",children:[Object(g.jsxs)(O.a,{children:[Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(m.a,{value:this.state.alerts})})}),Object(g.jsx)("div",{children:"Total"})]}),Object(g.jsx)(O.a,{className:"separator",children:"."}),Object(g.jsxs)(O.a,{children:[Object(g.jsx)("div",{className:"average",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(m.a,{value:this.state.average})})}),Object(g.jsx)("div",{children:"Avg/Day"})]})]}),e&&!this.props.showAverage&&Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(m.a,{value:this.state.alerts})})}),this.state.isError&&Object(g.jsxs)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:[Object(g.jsx)(x.a,{className:this.props.showAverage?"loading-average":"loading-basic"})," Error"]})]})]})})}}]),a}(r.a.Component);S.defaultProps={isHeroTile:!1,title:"",subtitle:"",toDate:Object(u.a)(new Date,{representation:"date"}),showAverage:!1};var D=a(129),k=a.p+"static/media/logo.517fc583.svg",N=function(e){return Object(g.jsxs)("header",{className:"header",children:[Object(g.jsxs)("div",{className:"top",children:[Object(g.jsx)("img",{className:"logo",src:k,alt:""}),Object(g.jsx)("h2",{children:"Real-time rocket alerts in Israel"})]}),Object(g.jsx)(S,{isHeroTile:!0,title:"alerts today",subtitle:e.getYesterday(),fromDate:e.getYesterday(),alertsClient:e.alertClient}),Object(g.jsx)("div",{className:"share",children:Object(g.jsxs)("a",{href:"https://twitter.com/intent/tweet?button_hashtag=RocketAlert&ref_src=twsrc%5Etfw","data-show-count":"false","data-text":"custom share text","data-url":"https://dev.twitter.com/web/tweet-button","data-hashtags":"example,demo","data-via":"twitterdev","data-related":"twitterapi,twitter",children:[Object(g.jsx)("div",{children:Object(g.jsx)(D.a,{style:{fontSize:"24px",color:"white"}})}),Object(g.jsx)("div",{children:"#RocketAlerts"})]})})]})};N.defaultProps={getYesterday:function(){}};var E=N,C=a(67),T=function(e){var t=e.shouldShow,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],l=n[1];Object(s.useEffect)((function(){t&&l(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"moveIn 400ms":"none"},onAnimationEnd:function(){t||l(!1)},children:a})},I=a.p+"static/media/pinicon.048d0e71.svg",M=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={shouldRefreshAlert:!1,incomingAlerts:["15:24: Nahal Oz","15:24: Nativ Haasara","15:24: Sderot","15:25: Beersheba","15:25: Mefalsim","15:25: Tkuma","15:25: Nahal Oz","15:25: Nativ Haasara","15:26: Sderot","15:26: Beersheba","15:27: Mefalsim","15:27: Tkuma"],newAlert:"",alertList:[]},e.showNewAlert=function(t){var a=[t].concat(Object(C.a)(e.state.alertList));setTimeout((function(){e.setState({alertList:a,shouldRefreshAlert:!0}),setTimeout((function(){e.setState({shouldRefreshAlert:!1})}),1500)}),1)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=0;setInterval((function(){e.showNewAlert(e.state.incomingAlerts[t++]),t===e.state.incomingAlerts.length&&(t=0)}),2e3)}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"live-alerts-container",children:[Object(g.jsx)("h2",{children:"Alerts now"}),Object(g.jsx)("div",{className:"alerts",children:this.state.alertList.map((function(t,a){return Object(g.jsx)(T,{shouldShow:e.state.shouldRefreshAlert,children:Object(g.jsxs)("div",{className:"alert-item",children:[Object(g.jsx)("img",{className:"pin-icon",src:I,alt:"alert"}),t]})},"".concat(t,"_").concat(a))}))})]})}}]),a}(r.a.Component),P=M,R=function(e){return Object(g.jsx)("header",{className:"header alert-mode",children:Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(O.a,{xs:24,sm:15,lg:15,children:[Object(g.jsxs)("div",{className:"title",children:[Object(g.jsx)("img",{className:"logo",src:k,alt:""}),Object(g.jsx)("h2",{children:"Real-time rocket alerts in Israel"})]}),Object(g.jsx)(S,{isHeroTile:!0,title:"alerts today",subtitle:e.getYesterday(),fromDate:e.getYesterday(),alertsClient:e.alertClient})]}),Object(g.jsx)(O.a,{xs:24,sm:9,lg:9,children:Object(g.jsx)(P,{})})]})})};R.defaultProps={getYesterday:function(){}};var L=R,H=function(e){var t=e.show,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],l=n[1];Object(s.useEffect)((function(){t&&l(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"fadeIn 400ms":"fadeOut 400ms"},onAnimationEnd:function(){t||l(!1)},children:a})},Y=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={shouldRefresh:!1},e.showAlert=function(t){e.setState({shouldRefresh:!0}),setTimeout((function(){e.setState({shouldRefresh:!1})}),2e3)},e.setStickyHeaderStyle=function(){var t="sticky-header";return e.props.showStickyHeader&&(t+=" active"),e.props.isAlertMode&&(t+=" alert-mode"),t},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.realTimeAlert!==e.realTimeAlert&&this.showAlert(this.props.realTimeAlert)}},{key:"render",value:function(){return Object(g.jsxs)("header",{className:this.setStickyHeaderStyle(),children:[Object(g.jsxs)("div",{className:"left-container",children:[Object(g.jsx)("div",{children:Object(g.jsx)("img",{className:"logo",src:k,alt:""})}),Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(m.a,{value:7325})}),this.props.isAlertMode&&this.props.realTimeAlert&&Object(g.jsx)("div",{children:Object(g.jsx)(H,{show:this.state.shouldRefresh,children:"Rocket alert: ".concat(this.props.realTimeAlert.name)})})]}),Object(g.jsxs)("div",{className:"right-container",children:[Object(g.jsx)(D.a,{style:{fontSize:"24px",color:"white"}}),"#RocketAlerts"]})]})}}]),a}(r.a.Component);Y.defaultProps={showStickyHeader:!1,isAlertMode:!1,realTimeAlert:{}};var Q=Y,B=function(e){return Object(g.jsxs)("section",{className:"section",children:[Object(g.jsx)("h2",{children:"Previous operations"}),Object(g.jsxs)(b.a,{gutter:[24,24],children:[Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Operation Cast Lead",subtitle:"27 Dec 2008 - 18 Jan 2009",fromDate:"2008-12-27",toDate:"2009-01-18",alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Operation Pillar of Defense",subtitle:"14 Nov 2012 - 21 Nov 2012",fromDate:"2012-11-14",toDate:"2012-11-21",alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Operation Protective Edge",subtitle:"8 July 2014 - 26 Aug 2014",fromDate:"2014-07-08",toDate:"2014-08-26",alertsClient:e.alertsClient,showAverage:!0})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Operation Black Belt",subtitle:"12 Nov 2019 - 16 Nov 2019",fromDate:"2019-11-12",toDate:"2019-11-16",alertsClient:e.alertsClient,showAverage:!0})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Operation Guardian of the Walls",subtitle:"10 May 2021 - 21 May 2021",fromDate:"2021-05-10",toDate:"2021-05-21",alertsClient:e.alertsClient,showAverage:!0})})]})]})};B.defaultProps={showAverage:!1};var z=B,J=a(115),q=a(125),W=a(116),_=a(126),F=(a(117),a(118),a(119),function(e){return Object(u.a)(e,{representation:"date"})}),U=function(){var e=Object(J.a)(new Date,1);return F(e)},G=function(){var e=Object(q.a)(new Date,1);return F(e)},K=function(){var e=Object(W.a)(new Date,1);return F(e)},V=function(){var e=Object(_.a)(new Date,1);return F(e)},X=function(e){return Object(g.jsxs)("section",{className:"section",children:[Object(g.jsx)("h2",{children:"."}),Object(g.jsxs)(b.a,{gutter:[24,24],children:[Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Yesterday",subtitle:U(),fromDate:U(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Past Week",subtitle:"Since ".concat(G()),fromDate:G(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Past Month",subtitle:"Since ".concat(K()),fromDate:K(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(S,{title:"Past Year",subtitle:"Since ".concat(V()),fromDate:V(),alertsClient:e.alertsClient})})]})]})},Z=function(){return Object(g.jsx)("section",{className:"section",children:Object(g.jsx)("h2",{children:"Map"})})};Z.defaultProps={};var $=function(){return Object(g.jsx)("footer",{})};$.defaultProps={};var ee=$,te=function(){return Object(g.jsx)("section",{className:"section faq",children:Object(g.jsx)("h2",{children:"Frequently Asked Questions"})})};te.defaultProps={};var ae=te,se=a(36),re=a(19),ne="https://ra-agg.kipodopik.com/api/v1/alerts",ie=Object(se.a)(ne),le={getTotalAlertsByDay:function(e,t){return e&&Object(re.a)(new Date(e))?t&&Object(re.a)(new Date(t))?ie.url("/daily").query({from:e,to:t}).get().json():Promise.reject(new Error("Invalid Date: to")):Promise.reject(new Error("Invalid Date: from"))},getTotalAlerts:function(e,t){return e&&Object(re.a)(new Date(e))?t&&Object(re.a)(new Date(t))?ie.url("/total").query({from:e,to:t}).get().json():Promise.reject(new Error("Invalid Date: to")):Promise.reject(new Error("Invalid Date: from"))},getRealTimeAlertEventSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"".concat(ne,"/real-time");return new EventSource(e)}},ce=le,oe={isDev:function(){return!1}},je={alertEventSource:null,alertInterval:null,alertQueue:[],startRealTimeAlerts:function(e,t){je.alertEventSource=e.getRealTimeAlertEventSource(),je.alertEventSource.onopen=function(){oe.isDev()&&console.log("Connection to server opened"),je.processAlert(t)},je.alertEventSource.addEventListener("message",(function(e){oe.isDev()&&console.log("Incoming alert: ",e.data),30===je.alertQueue.length&&je.alertQueue.shift(),je.alertQueue.push(e.data)})),je.alertEventSource.onerror=function(){oe.isDev()&&console.log("EventSource failed.")}},processAlert:function(e){je.alertInterval=setInterval((function(){if(je.alertQueue.length>0){var t=je.alertQueue.shift(),a=0===je.alertQueue.length;e(t,a)}}),3e3)},stopRealTimeAlerts:function(){je.alertEventSource&&(je.alertEventSource.close(),clearInterval(je.alertInterval))}},de=je,he=a(66),ue=a.n(he),be=0,Oe=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={alerts:{},showStickyHeader:!1,startfadeInEffect:!1,isAlertMode:!1,realTimeAlert:null},e.alertEventSource=null,e.isAlertModeQueryString=function(){var e=ue.a.parse(window.location.search),t=Object.keys(e);return 1===t.length&&("mode"===t[0].toLowerCase()&&"alert"===e[t[0]])},e.startRealTimeAlerts=function(){de.startRealTimeAlerts(ce,(function(t,a){oe.isDev()&&console.log("Processing alert",t),e.setState({realTimeAlert:JSON.parse(t),isAlertMode:!a})}))},e.mockIncomingAlerts=function(){oe.isDev()&&setInterval((function(){Object(se.a)("https://ra-agg.kipodopik.com/api/v1/alerts/real-time?token=BHHWEIP221a547&data=test".concat(++be)).post().res().catch((function(e){return console.log("e",e)}))}),3e3)},e.handleScroll=function(t){var a=.8*window.innerHeight;e.setState({showStickyHeader:window.scrollY>Math.floor(a)})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.startRealTimeAlerts(),this.mockIncomingAlerts(),window.addEventListener("scroll",this.handleScroll),this.setState({startfadeInEffect:!0,isAlertMode:this.isAlertModeQueryString()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),de.stopRealTimeAlerts()}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:this.state.startfadeInEffect?"pageContainer active":"pageContainer",children:[this.state.isAlertMode?Object(g.jsx)(L,{getYesterday:U,alertClient:ce}):Object(g.jsx)(E,{getYesterday:U,alertClient:ce}),Object(g.jsx)(Q,{showStickyHeader:this.state.showStickyHeader,isAlertMode:this.state.isAlertMode,realTimeAlert:this.state.realTimeAlert}),Object(g.jsx)(X,{alertsClient:ce}),Object(g.jsx)(z,{alertsClient:ce}),Object(g.jsx)(ae,{}),Object(g.jsx)(ee,{})]})}}]),a}(r.a.Component),fe=Oe;i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(fe,{})}),document.getElementById("root"))},76:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.5ab8981f.chunk.js.map