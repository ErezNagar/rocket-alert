(this["webpackJsonprocket-alert"]=this["webpackJsonprocket-alert"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(55),i=a.n(n),c=a(13),l=a(14),o=a(16),j=a(15),d=(a(76),a(69)),h=a(122),u=a(124),b=a(121),O=a(123),f=a(114),v=a(120),m=a(127),x=a(128),p=a(23),g=a(1),w=function(e){var t=e.show,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],c=n[1];Object(s.useEffect)((function(){t&&c(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"fadeIn 400ms":"none"},onAnimationEnd:function(){t||c(!1)},children:a})},y=function(e){var t=e.showAverage;return Object(g.jsx)(b.a,{gutter:[8],justify:"center",className:t?"loading-average":"loading-basic",children:Object(g.jsx)(O.a,{children:Object(g.jsx)(f.a,{indicator:Object(g.jsx)(m.a,{style:{fontSize:24,color:"black"},spin:!0})})})})};y.defaultProps={showAverage:!1};var A=function(e){var t=e.isLoading,a=e.title,s=e.alerts;return Object(g.jsxs)("div",{className:"tile-hero",children:[Object(g.jsx)(w,{show:!t,fadeInOnly:!0,children:Object(g.jsx)(v.a,{value:s})}),Object(g.jsx)("h3",{children:a})]})};A.defaultProps={isLoading:!1,title:"",alerts:0};var N=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0,isError:!1,alerts:null},e.getAlerts=function(){e.props.alertsClient.getTotalAlerts(e.props.fromDate,e.props.toDate).then((function(t){if(e.props.isHeroTile)e.setState({alerts:7325,isLoading:!1});else{if(e.props.showAverage){var a=Object(h.a)(new Date(e.props.toDate),new Date(e.props.fromDate));e.setState({average:Math.round(t.payload/a)})}setTimeout((function(){e.setState({alerts:t.payload,isLoading:!1})}),1e3*Math.floor(4*Math.random()))}})).catch((function(t){console.error(t),e.setState({isError:!0})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getAlerts()}},{key:"render",value:function(){var e=!this.state.isLoading&&!this.state.isError;return Object(g.jsx)(g.Fragment,{children:this.props.isHeroTile?Object(g.jsx)(A,{alerts:7325}):Object(g.jsxs)("div",{className:"tile",children:[Object(g.jsx)("h3",{children:this.props.title}),Object(g.jsx)("div",{className:"subtitle",children:this.props.subtitle}),Object(g.jsxs)("div",{children:[this.state.isLoading&&Object(g.jsx)(y,Object(d.a)({},this.props)),e&&this.props.showAverage&&Object(g.jsxs)(b.a,{gutter:[8],justify:"center",className:"average-container",children:[Object(g.jsxs)(O.a,{children:[Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(v.a,{value:this.state.alerts})})}),Object(g.jsx)("div",{children:"Total"})]}),Object(g.jsx)(O.a,{className:"separator",children:"."}),Object(g.jsxs)(O.a,{children:[Object(g.jsx)("div",{className:"average",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(v.a,{value:this.state.average})})}),Object(g.jsx)("div",{children:"Avg/Day"})]})]}),e&&!this.props.showAverage&&Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:Object(g.jsx)(v.a,{value:this.state.alerts})})}),this.state.isError&&Object(g.jsxs)(w,{show:!this.state.isLoading,fadeInOnly:!0,children:[Object(g.jsx)(x.a,{className:this.props.showAverage?"loading-average":"loading-basic"})," Error"]})]})]})})}}]),a}(r.a.Component);N.defaultProps={isHeroTile:!1,title:"",subtitle:"",toDate:Object(u.a)(new Date,{representation:"date"}),showAverage:!1};var D=a(129),k=function(e){return Object(g.jsxs)("header",{className:"header",children:[Object(g.jsxs)("div",{className:"top",children:[Object(g.jsx)("h1",{children:"Rocket Alerts"}),Object(g.jsx)("h2",{children:"Real-time rocket alerts in Israel"})]}),Object(g.jsx)(N,{isHeroTile:!0,title:"alerts today",subtitle:e.getYesterday(),fromDate:e.getYesterday(),alertsClient:e.alertClient}),Object(g.jsx)("div",{className:"share",children:Object(g.jsxs)("a",{href:"https://twitter.com/intent/tweet?button_hashtag=RocketAlert&ref_src=twsrc%5Etfw","data-show-count":"false","data-text":"custom share text","data-url":"https://dev.twitter.com/web/tweet-button","data-hashtags":"example,demo","data-via":"twitterdev","data-related":"twitterapi,twitter",children:[Object(g.jsx)("div",{children:Object(g.jsx)(D.a,{style:{fontSize:"24px",color:"white"}})}),Object(g.jsx)("div",{children:"#RocketAlerts"})]})})]})};k.defaultProps={getYesterday:function(){}};var C=k,S=a(67),E=function(e){var t=e.shouldShow,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],c=n[1];Object(s.useEffect)((function(){t&&c(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"moveIn 400ms":"none"},onAnimationEnd:function(){t||c(!1)},children:a})},M=a.p+"static/media/pinicon.048d0e71.svg",L=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={shouldRefreshAlert:!1,incomingAlerts:["15:24: Nahal Oz","15:24: Nativ Haasara","15:24: Sderot","15:25: Beersheba","15:25: Mefalsim","15:25: Tkuma","15:25: Nahal Oz","15:25: Nativ Haasara","15:26: Sderot","15:26: Beersheba","15:27: Mefalsim","15:27: Tkuma"],newAlert:"",alertList:[]},e.showNewAlert=function(t){var a=[t].concat(Object(S.a)(e.state.alertList));setTimeout((function(){e.setState({alertList:a,shouldRefreshAlert:!0}),setTimeout((function(){e.setState({shouldRefreshAlert:!1})}),1500)}),1)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=0;setInterval((function(){e.showNewAlert(e.state.incomingAlerts[t++]),t===e.state.incomingAlerts.length&&(t=0)}),2e3)}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"live-alerts-container",children:[Object(g.jsx)("h2",{children:"Alerts now"}),Object(g.jsx)("div",{className:"alerts",children:this.state.alertList.map((function(t,a){return Object(g.jsx)(E,{shouldShow:e.state.shouldRefreshAlert,children:Object(g.jsxs)("div",{className:"alert-item",children:[Object(g.jsx)("img",{className:"pin-icon",src:M,alt:"alert"}),t]})},"".concat(t,"_").concat(a))}))})]})}}]),a}(r.a.Component),P=L,I=function(e){return Object(g.jsx)("header",{className:"header alert-mode",children:Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(O.a,{xs:24,sm:15,lg:15,children:[Object(g.jsxs)("div",{className:"title",children:[Object(g.jsx)("h1",{children:"Rocket Alerts"}),Object(g.jsx)("h2",{children:"Real-time rocket alerts in Israel"})]}),Object(g.jsx)(N,{isHeroTile:!0,title:"alerts today",subtitle:e.getYesterday(),fromDate:e.getYesterday(),alertsClient:e.alertClient})]}),Object(g.jsx)(O.a,{xs:24,sm:9,lg:9,children:Object(g.jsx)(P,{})})]})})};I.defaultProps={getYesterday:function(){}};var R=I,T=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(g.jsxs)("header",{className:"sticky-header active",children:[Object(g.jsxs)("div",{className:"left-container",children:[Object(g.jsx)("div",{className:"title",children:"Ra"}),Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(v.a,{value:7325})})]}),Object(g.jsxs)("div",{className:"right-container",children:[Object(g.jsx)(D.a,{style:{fontSize:"24px",color:"white"}}),"#RocketAlerts"]})]})}}]),a}(r.a.Component);T.defaultProps={};var H=T,Y=function(e){var t=e.show,a=e.children,r=Object(s.useState)(t),n=Object(p.a)(r,2),i=n[0],c=n[1];Object(s.useEffect)((function(){t&&c(!0)}),[t]);return i&&Object(g.jsx)("div",{style:{animation:t?"fadeIn 400ms":"fadeOut 400ms"},onAnimationEnd:function(){t||c(!1)},children:a})},z=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={shouldRefresh:!1,location:"",locations:["Nahal Oz","Nativ Haasara","Sderot","Beersheba","Mefalsim","Tkuma"]},e.refreshLocation=function(t){setTimeout((function(){e.setState({location:t,shouldRefresh:!0}),setTimeout((function(){e.setState({shouldRefresh:!1})}),2e3)}),1)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=0;setInterval((function(){e.refreshLocation(e.state.locations[t++]),t===e.state.locations.length&&(t=0)}),2500)}},{key:"render",value:function(){return Object(g.jsxs)("header",{className:"sticky-header alert-mode active",children:[Object(g.jsxs)("div",{className:"left-container",children:[Object(g.jsx)("div",{className:"title",children:"Ra"}),Object(g.jsx)("div",{className:"alerts",children:Object(g.jsx)(v.a,{value:7325})}),Object(g.jsx)("div",{children:Object(g.jsx)(Y,{show:this.state.shouldRefresh,children:"Rocket alert: ".concat(this.state.location)})})]}),Object(g.jsxs)("div",{className:"right-container",children:[Object(g.jsx)(D.a,{style:{fontSize:"24px",color:"white"}}),"#RocketAlerts"]})]})}}]),a}(r.a.Component);z.defaultProps={};var B=z,q=function(e){return Object(g.jsxs)("section",{className:"section",children:[Object(g.jsx)("h2",{children:"Previous operations"}),Object(g.jsxs)(b.a,{gutter:[24,24],children:[Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Operation Cast Lead",subtitle:"27 Dec 2008 - 18 Jan 2009",fromDate:"2008-12-27",toDate:"2009-01-18",alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Operation Pillar of Defense",subtitle:"14 Nov 2012 - 21 Nov 2012",fromDate:"2012-11-14",toDate:"2012-11-21",alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Operation Protective Edge",subtitle:"8 July 2014 - 26 Aug 2014",fromDate:"2014-07-08",toDate:"2014-08-26",alertsClient:e.alertsClient,showAverage:!0})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Operation Black Belt",subtitle:"12 Nov 2019 - 16 Nov 2019",fromDate:"2019-11-12",toDate:"2019-11-16",alertsClient:e.alertsClient,showAverage:!0})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Operation Guardian of the Walls",subtitle:"10 May 2021 - 21 May 2021",fromDate:"2021-05-10",toDate:"2021-05-21",alertsClient:e.alertsClient,showAverage:!0})})]})]})};q.defaultProps={showAverage:!1};var J=q,W=a(115),_=a(125),F=a(116),G=a(126),Q=(a(117),a(118),a(119),function(e){return Object(u.a)(e,{representation:"date"})}),U=function(){var e=Object(W.a)(new Date,1);return Q(e)},K=function(){var e=Object(_.a)(new Date,1);return Q(e)},V=function(){var e=Object(F.a)(new Date,1);return Q(e)},X=function(){var e=Object(G.a)(new Date,1);return Q(e)},Z=function(e){return Object(g.jsxs)("section",{className:"section",children:[Object(g.jsx)("h2",{children:"."}),Object(g.jsxs)(b.a,{gutter:[24,24],children:[Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Yesterday",subtitle:U(),fromDate:U(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Past Week",subtitle:"Since ".concat(K()),fromDate:K(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Past Month",subtitle:"Since ".concat(V()),fromDate:V(),alertsClient:e.alertsClient})}),Object(g.jsx)(O.a,{xs:24,sm:12,md:8,lg:6,children:Object(g.jsx)(N,{title:"Past Year",subtitle:"Since ".concat(X()),fromDate:X(),alertsClient:e.alertsClient})})]})]})},$=function(){return Object(g.jsx)("section",{className:"section",children:Object(g.jsx)("h2",{children:"Map"})})};$.defaultProps={};var ee=$,te=function(){return Object(g.jsx)("footer",{})};te.defaultProps={};var ae=te,se=function(){return Object(g.jsx)("section",{className:"section faq",children:Object(g.jsx)("h2",{children:"Frequently Asked Questions"})})};se.defaultProps={};var re=se,ne=a(66),ie=a(19),ce=Object(ne.a)("https://ra-agg.kipodopik.com/api/v1/alerts"),le={getTotalAlertsByDay:function(e,t){return e&&Object(ie.a)(new Date(e))?t&&Object(ie.a)(new Date(t))?ce.url("/daily").query({from:e,to:t}).get().json():Promise.reject(new Error("Invalid Date: to")):Promise.reject(new Error("Invalid Date: from"))},getTotalAlerts:function(e,t){return e&&Object(ie.a)(new Date(e))?t&&Object(ie.a)(new Date(t))?ce.url("/total").query({from:e,to:t}).get().json():Promise.reject(new Error("Invalid Date: to")):Promise.reject(new Error("Invalid Date: from"))}},oe=a(65),je=a.n(oe),de=function(e){Object(o.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={alerts:{},showStickyHeader:!1,startfadeInEffect:!1,randomString:"test",isAlertMode:!1},e.getAppMode=function(){var e=je.a.parse(window.location.search),t=Object.keys(e);return 1===t.length&&("mode"===t[0].toLowerCase()&&"alert"===e[t[0]])},e.handleScroll=function(t){var a=.8*window.innerHeight;e.setState({showStickyHeader:window.scrollY>Math.floor(a)})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll);var e=this.getAppMode();this.setState({startfadeInEffect:!0,isAlertMode:e})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:this.state.startfadeInEffect?"pageContainer active":"pageContainer",children:[this.state.isAlertMode?Object(g.jsx)(R,{getYesterday:U,alertClient:le,randomString:this.state.randomString}):Object(g.jsx)(C,{getYesterday:U,alertClient:le}),this.state.showStickyHeader&&this.state.isAlertMode&&Object(g.jsx)(B,{}),this.state.showStickyHeader&&!this.state.isAlertMode&&Object(g.jsx)(H,{}),Object(g.jsx)(Z,{alertsClient:le}),Object(g.jsx)(ee,{}),Object(g.jsx)(J,{alertsClient:le}),Object(g.jsx)(re,{}),Object(g.jsx)(ae,{})]})}}]),a}(r.a.Component),he=de;i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(he,{})}),document.getElementById("root"))},76:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.c83a219d.chunk.js.map